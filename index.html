<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="icon" href="img/dog.png" type="image/png">

  <title>🐕 Zelda 派件中</title>
  <style>
    /* 保留现有的样式 */
    html, body {
      margin: 0;
      padding: 0;
      height: 100vh;
      font-family: 'Arial', sans-serif;
      background-color: #fefae0;
      background-image: url("img/background.jpg");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      overflow: hidden;
    }

    .scene {
      width: 100%;
      height: 100%;
      position: relative;
    }

    .zelda-container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      z-index: 5;
    }

    .zelda-container img {
      width: 300px;
      max-width: 80vw;
      cursor: pointer;
    }

    .zelda-text {
      font-size: 1.6rem;
      color: #4d4d4d;
      margin-bottom: 1rem;
      text-align: center;
      animation: floatBlink 1.8s infinite;
      z-index: 10;
      max-width: 90vw;
      line-height: 1.5;
      word-break: break-word;
    }

    .emoji-line {
      display: block;
      margin-top: 0.4rem;
    }

    .dog {
      position: absolute;
      bottom: 5vh;
      width: 25vw;
      min-width: 220px;
      max-width: 400px;
      left: -30vw;
      transform: translateX(-100%);
      animation: moveDog 3s ease-out forwards;
      z-index: 1;
      display: none;
    }

    .gift {
      position: absolute;
      bottom: 30vh;
      width: 34vw;
      min-width: 320px;
      max-width: 480px;
      left: 50%;
      transform: translateX(-50%);
      animation: moveGift 3s ease-out forwards;
      z-index: 2;
      transition: transform 0.3s;
      display: none;
    }

    .gift:hover {
      transform: scale(1.05) rotate(-2deg);
    }

    .tap-text {
      position: absolute;
      top: 15vh;  /* 可手动微调 */
      left: 50%;
      transform: translateX(-50%);
      font-size: 1.6rem;
      color: #4d4d4d;
      animation: blink 1.2s infinite;
      z-index: 4;
      text-align: center;
      display: none;
    }

    @media (max-width: 600px) {
      .tap-text {
        top: 9vh;         /* 手机上再往上移动 */
        font-size: 1.4rem; /* 字体略小更适配 */
      }
    }

    @keyframes moveDog {
      0% {
        left: -30vw;
        transform: translateX(0);
      }
      100% {
        left: 50%;
        transform: translateX(-100%);
      }
    }

    @keyframes moveGift {
      0% {
        left: -40vw;
        transform: translateX(0);
      }
      100% {
        left: 50%;
        transform: translateX(-50%);
      }
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }

    @keyframes popUpGift {
      0% {
        transform: scale(0.2) translate(-50%, 0);
        opacity: 0;
      }
      60% {
        transform: scale(1.1) translate(-50%, 0);
        opacity: 1;
      }
      100% {
        transform: scale(1) translate(-50%, 0);
      }
    }

    .gift.pop {
      animation: popUpGift 0.8s ease-out forwards;
    }

    .balloon {
      position: absolute;
      bottom: -100px;
      width: 40px;
      height: 60px;
      border-radius: 50%;
      opacity: 0.9;
      animation: floatBalloon 10s linear infinite;
      box-shadow: inset -3px -6px rgba(0,0,0,0.1);
      display: none; /* 初始不显示 */
    }

    .balloon::after {
      content: "";
      position: absolute;
      bottom: -20px;
      left: 50%;
      width: 2px;
      height: 20px;
      background: #aaa;
      transform: translateX(-50%);
    }

    .balloon.red     { background: radial-gradient(circle at 30% 30%, #ff7f7f, #cc0000); left: 10%; animation-delay: 0s; }
    .balloon.blue    { background: radial-gradient(circle at 30% 30%, #80dfff, #0099cc); left: 25%; animation-delay: 2s; }
    .balloon.yellow  { background: radial-gradient(circle at 30% 30%, #fff699, #ffcc00); left: 40%; animation-delay: 4s; }
    .balloon.green   { background: radial-gradient(circle at 30% 30%, #b0ffb0, #33cc33); left: 55%; animation-delay: 1s; }
    .balloon.purple  { background: radial-gradient(circle at 30% 30%, #e6ccff, #9933ff); left: 70%; animation-delay: 3s; }
    .balloon.pink    { background: radial-gradient(circle at 30% 30%, #ffcce5, #ff3399); left: 85%; animation-delay: 5s; }

    @keyframes floatBalloon {
      0% {
        transform: translateY(0) translateX(0);
        opacity: 0;
      }
      10% { opacity: 1; }
      100% {
        transform: translateY(-120vh) translateX(20px);
        opacity: 0;
      }
    }

    @keyframes floatBlink {
      0% {
        transform: translateY(0);
        opacity: 1;
      }
      50% {
        transform: translateY(-8px);
        opacity: 0.4;
      }
      100% {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .second-prompt {
      position: absolute;
      top: 17vh; /* 桌面端默认 */
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255, 255, 255, 0.96);
      padding: 1rem 1.5rem;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
      text-align: center;
      font-size: 1.2rem;
      line-height: 1.6;
      color: #333;
      z-index: 20;
      animation: fadeIn 0.6s ease forwards;
    }

    /* ✅ 针对手机屏幕的高度适配 */
    @media (max-width: 600px) {
      .second-prompt {
        top: 1vh;  /* ✅ 原来是 16vh，现在提升到 10vh 更靠上 */
        font-size: 1.1rem;
        padding: 0.8rem 1rem;
      }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translate(-50%, -20px); }
      to   { opacity: 1; transform: translate(-50%, 0); }
    }

    .emphasis {
      font-size: 1.3em;  /* 放大 */
      font-weight: bold; /* 加粗 */
      color: #222;       /* 稍微深一点让它更醒目 */
    }

    .click-again-text {
      position: absolute;
      top: 25vh;
      left: 50%;
      transform: translateX(-50%);
      font-size: 1.6rem;
      color: #444;
      z-index: 20;
      text-align: center;
      margin-top: 0.6rem;
      animation: blink 1.2s infinite;
    }

    /* ✅ 手机端位置向上对齐第一次提示 */
    @media (max-width: 600px) {
      .click-again-text {
        top: 8vh;         /* 向下偏移一些 */
        font-size: 1.3rem;   /* 字体变小 */
        line-height: 1.4;
      }
    }

    @media (max-width: 600px) {
      .zelda-text {
        font-size: 1.3rem; /* 更适配手机 */
      }
    }
  </style>
</head>
<body>

<div class="scene">
  <!-- 气球 -->
  <div class="balloon red"></div>
  <div class="balloon blue"></div>
  <div class="balloon yellow"></div>
  <div class="balloon green"></div>
  <div class="balloon purple"></div>
  <div class="balloon pink"></div>

  <!-- Zelda 初始状态 -->
  <div class="zelda-container">
    <div class="zelda-text">
      Zelda 有秘密要告诉你～<br />
      <span class="emoji-line">👇快点我！👇</span>
    </div>
    <img id="zelda" src="img/zelda.png" alt="Zelda">
  </div>

  <!-- 第二次提示框 -->
  <div class="second-prompt" id="secondPrompt" style="display: none;">
    <p>🤫 嘘～准备好了吗？</p>
    <p>Zelda 有小秘密要悄悄告诉你哦，记得 <span class="emphasis" id="volumeTip">打开声音</span>！</p>
  </div>

  <!-- 再次点击提示 -->
  <div id="clickAgain" class="click-again-text" style="display: none;">
    准备好后<br>
    👇请再点一下 Zelda 👇
  </div>

  <!-- 播放视频 -->
  <video id="zelda-video" style="display:none; position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); width:300px; z-index:6;" autoplay muted playsinline preload="auto">
    <source src="img/dog.mp4" type="video/mp4">
  </video>

  <!-- 播放音乐 -->
  <audio id="zelda-music" src="music/ezuojv.MP3" preload="auto"></audio>
  <!-- <audio id="zelda-music" src="music/speicalpeople.MP3" preload="auto"></audio> -->

  <!-- 后续动画内容 -->
  <a href="surprise.html">
    <img src="img/box.png" class="gift" id="gift-box" alt="gift box" style="display:none;">
  </a>
  <div class="tap-text" id="tap-tip">👇点击🎁打开👇</div>
</div>

<script>
  let clickCount = 0;
  let promptShown = false;
  const zelda = document.getElementById('zelda');
  const zeldaText = document.querySelector('.zelda-text');
  const secondPrompt = document.getElementById('secondPrompt');
  const clickAgain = document.getElementById('clickAgain');
  const video = document.getElementById('zelda-video');
  const giftBox = document.getElementById('gift-box');
  const tapTip = document.getElementById('tap-tip');
  const music = document.getElementById('zelda-music');  // 音乐元素

  zelda.addEventListener('click', () => {
    clickCount++;

    if (clickCount === 1) {
      secondPrompt.style.display = 'block';
      zeldaText.style.display = 'none';

      setTimeout(() => {
        secondPrompt.style.display = 'none';
        clickAgain.style.display = 'block';
        promptShown = true;
      }, 5000);
    } 
    else if (clickCount === 2 && !promptShown) {
      clickCount--; 
      return;
    }
    else if (clickCount === 2 && promptShown) {
      clickAgain.style.display = 'none';
      zelda.style.display = 'none';
      video.style.display = 'block';
      video.currentTime = 0;
      video.play();
      music.play();  // 播放音乐

      // 播放 5 秒后暂停并显示礼盒
      setTimeout(() => {
        video.pause();
        video.style.display = 'none';

        giftBox.style.display = 'block';
        giftBox.classList.add('pop');

        tapTip.style.display = 'block';

        document.querySelectorAll('.balloon').forEach(balloon => {
          balloon.style.display = 'block';
        });
      }, 5000);
    }
  });
</script>

</body>
</html>
